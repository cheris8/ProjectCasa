---
title: ""
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# 모델링 순서

## 1. 클러스터링
- K-Prototype 알고리즘 적용

  - 초기에 K-Means 클러스터링 알고리즘 고려했다, 그러나
    1) 연속형 + 범주형 변수가 섞여있는 데이터
    2) 범주형 변수를 지시 변수화할 경우 차원이 증가
    3) PCA를 통해 차원을 축소할 수 있지만, 추가적인 과정이 비효율적
  
  - 연속형과 범주형 변수를 형태 그대로 적용할 수 있는 K-Prototype 알고리즘 사용
    - 1부터 20개의 k에서 Cost가 어떻게 변화하는지 측정
    - Elbow-Method를 적용하여 기울기의 변동률이 10% 미만으로 떨어지며 클러스터 수가 작은 값을 적당한 k라고 정의합니다.
    - 수집된 데이터 상에는 11개의 클러스터가 적당한 것으로 판단되었습니다.
    - K-Prototype 알고리즘은 아래와 같이 K의 개수, 초기값 설정, 그리고 범주형 변수의 숫자 순서를 지정해야합니다.
    
```python
from kmodes.kprototypes import KPrototypes
model = KPrototypes(n_clusters=k, init='Cao', random_state=0)
cluster = model.fit_predict(train, categorical=cate_variable_number)
```

## 2. 시계열 예측
- ARIMA (모델 적용)
  - 사용자가 선택한 아파트의 거래 가격의 경우에는 해당 날짜에 따른 NA 값들이 많이 존재하기에 정상적인 시계열 모형을 사용할 수 없습니다. (거래가 되지 않은 날짜 존재)
  - 해당 NA 값들을 채우기 위해 선택된 아파트가 속한 cluster에서 아파트 가격을 정해진 기준에 따라 뽑아옵니다. (Sampling 과정)
  - NA 값을 기준으로 이전 날짜의 가격과 다음 날짜의 가격 사이에 있는 값들 중에서 최대값(Max) 사용
  - 결측치가 사라진 데이터를 통해 Auto-regressive 모형과 moving-average 모형을 합친 ARIMA 모형을 사용합니다. 
  - 이는 시계열 데이터의 안정성을 위한 조치입니다.